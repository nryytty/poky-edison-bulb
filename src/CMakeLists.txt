SET(CMAKE_EXE_LINKER_FLAGS "-lmraa -lpthread")

set (bulp_LIB_INCLUDE_DIRS
  ${PROJECT_SOURCE_DIR}/include
)

include_directories(
  ${bulp_LIB_INCLUDE_DIRS}
)

set (bulp_LIB_SRCS_NOAUTO
  ${PROJECT_SOURCE_DIR}/src/bulp.cpp
)

set (bulp_LIB_SRCS
    ${bulp_LIB_SRCS_NOAUTO}
    # autogenerated version file
    ${CMAKE_CURRENT_BINARY_DIR}/version.c
)
#add_library (bulp0 SHARED ${bulp_LIB_SRCS})

#set (bulp_LIB_GLOB_HEADERS
#  ${PROJECT_SOURCE_DIR}/api/mraa.h
#  ${PROJECT_SOURCE_DIR}/api/mraa.hpp
#)
#install (FILES ${bulp_LIB_GLOB_HEADERS} DESTINATION include/)

#target_link_libraries (bulp0 ${CMAKE_THREAD_LIBS_INIT})
#set_target_properties (bulp0
#   PROPERTIES
#   SOVERSION ${bulp_VERSION_MAJOR}
#   VERSION ${bulp_VERSION_STRING}
#)

add_executable(bulp ${bulp_LIB_SRCS})
set_target_properties (bulp
   PROPERTIES
   SOVERSION ${bulp_VERSION_MAJOR}
   VERSION ${bulp_VERSION_STRING}
)

#install (DIRECTORY ${PROJECT_SOURCE_DIR}/api/bulp/ DESTINATION include/bulp)

macro (bulp_CREATE_INSTALL_PKGCONFIG generated_file install_location)
  configure_file (${generated_file}.cmake ${CMAKE_CURRENT_BINARY_DIR}/${generated_file} @ONLY)
  install (FILES ${CMAKE_CURRENT_BINARY_DIR}/${generated_file} DESTINATION ${install_location})
endmacro (bulp_CREATE_INSTALL_PKGCONFIG)
bulp_create_install_pkgconfig (bulp.pc lib${LIB_SUFFIX}/pkgconfig)

#install(TARGETS bulp0 DESTINATION ${CMAKE_INSTALL_LIBDIR})

## Additional tools
# DOXYGEN
# SWIG
